# 營養素補充最佳化工具 - 使用說明

## 功能特色

✅ **需求管理**：設定各種營養素的需求範圍（最小值-最大值）
✅ **產品資料庫**：儲存保健食品的成分和價格資訊
✅ **智能分析**：自動計算組合是否滿足需求，顯示缺口
✅ **方案比較**：儲存多個方案並比較成本和完整度
✅ **視覺化呈現**：用不同顏色標示充足/不足/過量的營養素

## 安裝步驟

1. 確保已安裝 Python 3.7 或以上版本

2. 安裝 Flask：
```bash
pip install flask --break-system-packages
```

3. 執行程式：
```bash
python nutrition_optimizer.py
```

4. 開啟瀏覽器，前往：http://localhost:5000

## 使用流程

### 步驟 1：設定營養素需求範圍

1. 點擊「新增營養素」
2. 輸入營養素名稱（例如：維他命B6）
3. 設定最小值和最大值
4. 選擇單位（毫克/微克/國際單位/公克）
5. 點擊「儲存需求」

**範例：**
- 維他命B6：最小 10 mg - 最大 50 mg
- 維他命B9（葉酸）：最小 400 μg - 最大 1000 μg
- 維他命B12：最小 50 μg - 最大 200 μg

### 步驟 2：新增保健食品

1. 輸入產品名稱（例如：甲款綜合維他命）
2. 輸入價格（整罐/盒的價格）
3. 輸入總份數（例如：60 顆）
4. 輸入每日建議份數（例如：1 顆，如果是早晚各一顆則輸入 2）
5. 點擊「新增成分」
6. 從下拉選單選擇營養素
7. 輸入該營養素**每份**的含量（重要：是每一顆/份的含量，不是每日總量）
8. 重複 5-7 步驟新增所有成分
9. 點擊「新增產品」

系統會自動計算：
- 每日成本 = 總價 ÷ 總份數 × 每日建議份數
- 可吃天數 = 總份數 ÷ 每日建議份數
- 每日營養素攝取量 = 每份含量 × 每日建議份數

**範例產品：**

**甲款綜合維他命**
- 價格：NT$ 500
- 總份數：60 顆
- 每日建議份數：1 顆
- **每日成本：NT$ 8.33**
- **可吃：60 天**
- 成分（每顆）：
  - 維他命B6：8 mg → 每日攝取 8 mg
  - 維他命B9：600 μg → 每日攝取 600 μg
  - 維他命B12：100 μg → 每日攝取 100 μg

**乙款綜合維他命**
- 價格：NT$ 450
- 總份數：30 顆
- 每日建議份數：1 顆
- **每日成本：NT$ 15**
- **可吃：30 天**
- 成分（每顆）：
  - 維他命B6：15 mg
  - 維他命B9：500 μg
  - 維他命B12：30 μg

**單方維他命B6**
- 價格：NT$ 200
- 總份數：100 顆
- 每日建議份數：1 顆
- **每日成本：NT$ 2**
- **可吃：100 天**
- 成分（每顆）：
  - 維他命B6：50 mg

**單方維他命B12**
- 價格：NT$ 180
- 總份數：60 顆
- 每日建議份數：1 顆
- **每日成本：NT$ 3**
- **可吃：60 天**
- 成分（每顆）：
  - 維他命B12：100 μg

### 步驟 3：選擇產品組合並分析

1. 勾選想要組合的產品
2. 系統會自動分析並顯示：
   - 完整度百分比
   - 總成本
   - ✅ 已滿足的營養素（綠色）
   - ⚠️ 不足的營養素（黃色）- **這裡會告訴你還需要補充什麼！**
   - ❌ 過量的營養素（紅色）

**範例分析：**

選擇「甲款綜合維他命」：
- 完整度：66.7%
- 總成本：NT$ 500（可吃 60 天）
- **每日成本：NT$ 8.33**
- ✅ 已滿足：維他命B9、維他命B12
- ⚠️ 不足：維他命B6（還差 2 mg）

選擇「甲款綜合維他命」+「單方維他命B6」：
- 完整度：100%
- 總成本：NT$ 700
- **每日成本：NT$ 10.33**（甲款 8.33 + B6 2.00）
- ✅ 已滿足：全部營養素

選擇「乙款綜合維他命」+「單方維他命B12」：
- 完整度：100%
- 總成本：NT$ 630
- **每日成本：NT$ 18**（乙款 15 + B12 3）
- ✅ 已滿足：全部營養素
- 💡 雖然總價較低，但每日成本較高（因為乙款只能吃 30 天）

### 步驟 4：儲存方案並比較

1. 找到滿意的組合後，點擊「儲存為方案」
2. 輸入方案名稱（例如：組合A、組合B）
3. 在「方案比較」區域查看所有方案
4. 比較不同方案的成本和完整度
5. 選擇最適合的方案

## 實際使用案例

### 案例：尋找最低成本的 B 群補充方案

**需求：**
- 維他命B6：10-50 mg
- 維他命B9：400-1000 μg
- 維他命B12：50-200 μg

**可選產品：**
- 甲款：NT$ 500 (60顆，每日1顆) → 每日 NT$ 8.33
- 乙款：NT$ 450 (30顆，每日1顆) → 每日 NT$ 15
- 單方B6：NT$ 200 (100顆，每日1顆) → 每日 NT$ 2
- 單方B12：NT$ 180 (60顆，每日1顆) → 每日 NT$ 3

**分析結果：**

1. **方案 A：甲款 + 單方B6**
   - 總購買成本：NT$ 700
   - **每日成本：NT$ 10.33** ✅ **最便宜！**
   - 完整度：100%
   - 不足：無
   - 可吃：60 天（甲款）/ 100 天（B6）

2. **方案 B：乙款 + 單方B12**
   - 總購買成本：NT$ 630
   - **每日成本：NT$ 18**
   - 完整度：100%
   - 不足：無
   - 可吃：30 天（乙款）/ 60 天（B12）

3. **方案 C：甲款單獨**
   - 總購買成本：NT$ 500
   - **每日成本：NT$ 8.33**
   - 完整度：66.7%
   - 不足：維他命B6（差 2 mg）

**關鍵發現：**
- 雖然方案 B 的**總購買成本**較低（NT$ 630 vs NT$ 700）
- 但方案 A 的**每日成本**更低（NT$ 10.33 vs NT$ 18）
- 長期來看，方案 A 更划算！

**結論：選擇方案 A（甲款 + 單方B6）最划算！**

## 進階技巧

### 技巧 1：快速比較多個組合
同時建立多個方案，在「方案比較」表格中一目了然地看出：
- 哪個組合最便宜
- 哪個組合完整度最高
- 哪個組合需要額外補充的項目最少

### 技巧 2：處理過量警告
如果出現紅色的「過量」警告，考慮：
- 換成含量較低的產品
- 減少該組合中的某個產品
- 查詢該營養素的安全上限

### 技巧 3：靈活調整需求
如果發現所有組合都太貴或無法滿足，可以：
- 調整需求範圍（放寬或縮小）
- 新增更多產品選項
- 考慮接受部分不足（例如只差一點點）

## 注意事項

⚠️ **健康提醒**
- 本工具僅用於比較產品組合，不提供醫療建議
- 營養素需求應根據個人健康狀況、年齡、性別而定
- 請諮詢醫師或營養師確定您的實際需求
- 注意營養素的安全上限，避免過量攝取

💡 **使用建議**
- 定期更新產品資料庫（價格和成分可能變動）
- 保留歷史方案以便未來參考
- 考慮產品的吸收率和生物利用度
- 注意產品的每日建議攝取量

## 技術資訊

- **後端**：Python + Flask
- **前端**：原生 HTML/CSS/JavaScript
- **資料儲存**：記憶體暫存（重啟後清空）

如需持久化儲存，可以：
1. 匯出資料到 JSON 檔案
2. 改用 SQLite 或其他資料庫
3. 加入匯入/匯出功能

## 常見問題

**Q：資料會保存嗎？**
A：目前資料儲存在記憶體中，關閉程式後會消失。如需永久保存，可以修改程式使用檔案或資料庫儲存。

**Q：可以同時比較幾個方案？**
A：沒有限制，可以儲存任意數量的方案。

**Q：如何新增更多單位？**
A：在 HTML 的 `<select id="req_unit_${id}">` 中新增 `<option>` 即可。

**Q：能否匯出比較表格？**
A：目前尚未實作，但可以複製表格內容到 Excel。未來可以加入匯出 CSV 功能。

## 授權

此工具為開源專案，可自由使用和修改。
